"use strict";var _express=_interopRequireDefault(require("express")),_cors=_interopRequireDefault(require("cors")),_dotenv=_interopRequireDefault(require("dotenv")),_adminmessages=require("./tables/adminmessages"),_blogMembers=require("./tables/blogMembers"),_blogTable=require("./tables/blogTable"),_forumTable=require("./tables/forumTable"),_forumAnswers=require("./tables/forumAnswers"),_forumTheme=require("./tables/forumTheme"),_uebermichTable=require("./tables/uebermichTable"),_usermessages=require("./tables/usermessages"),_bibliothek=require("./tables/bibliothek"),_path=_interopRequireDefault(require("path")),_adminmessagesRoute=_interopRequireDefault(require("./routes/adminmessagesRoute")),_authRoute=_interopRequireDefault(require("./routes/authRoute")),_bibliothekRoute=_interopRequireDefault(require("./routes/bibliothekRoute")),_blogmembersRoute=_interopRequireDefault(require("./routes/blogmembersRoute")),_blogRoute=_interopRequireDefault(require("./routes/blogRoute")),_forumAnswersRoute=_interopRequireDefault(require("./routes/forumAnswersRoute")),_forumRoute=_interopRequireDefault(require("./routes/forumRoute")),_forumthemesRoute=_interopRequireDefault(require("./routes/forumthemesRoute")),_uebermichRoute=_interopRequireDefault(require("./routes/uebermichRoute")),_usermessageRouter=_interopRequireDefault(require("./routes/usermessageRouter")),_forgottenTable=require("./tables/forgottenTable");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const cookieParser=require("cookie-parser");_dotenv.default.config();const app=(0,_express.default)(),port=process.env.SERVERPORT;app.use((0,_cors.default)()),app.use(_express.default.json()),app.use(_express.default.urlencoded({extended:!0})),app.use(cookieParser()),(0,_adminmessages.createAdminmessagesTable)(),(0,_bibliothek.creatBibliothekTable)(),(0,_blogMembers.createBlogmemberTable)(),(0,_blogTable.createBlogTable)(),(0,_forumTable.createForumTable)(),(0,_forumAnswers.createForumAnswersTable)(),(0,_forumTheme.createForumthemesTable)(),(0,_uebermichTable.createUebermichTable)(),(0,_usermessages.createusermessagesTable)(),(0,_forgottenTable.createForgottenTable)(),app.use("/api/adminmessages",_adminmessagesRoute.default),app.use("/api/auth",_authRoute.default),app.use("/api/bibliothek",_bibliothekRoute.default),app.use("/api/blogMembers",_blogmembersRoute.default),app.use("/api/blog",_blogRoute.default),app.use("/api/forumAnswers",_forumAnswersRoute.default),app.use("/api/forum",_forumRoute.default),app.use("/api/forumthemes",_forumthemesRoute.default),app.use("/api/uebermich",_uebermichRoute.default),app.use("/api/usermessages",_usermessageRouter.default),app.use(_express.default.static(_path.default.resolve(process.cwd(),"./frontend/src/"))),"production"===process.env.NODE_ENV?(app.use(_express.default.static(_path.default.join(__dirname,"../frontend/build"),{maxAge:"1y"})),app.get("*",((e,r)=>{console.log(e.originalUrl),r.sendFile(_path.default.resolve(__dirname,"../frontend/build/index.html"),{headers:{"Cache-Control":"no-store"}})}))):app.get("/",((e,r)=>r.send("Please send NODE_ENV to production"))),app.use(((e,r,u)=>{console.log(`Asset requested: ${e.url}`),u()})),app.listen(port,(()=>{console.log(`Server is running on port:${port}`)}));