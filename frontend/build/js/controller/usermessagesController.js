"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.usermessagesPut=exports.usermessagesPost=exports.usermessagesGetAll=exports.usermessagesGet=exports.usermessagesDelete=void 0;var _dbconnect=_interopRequireDefault(require("../db/dbconnect"));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}const usermessagesPost=async(s,e)=>{const{username:t,user_id:a,message:r}=s.body;try{const s=await _dbconnect.default.query("INSERT INTO usermessages (username, user_id, message, created_at, updated_at) VALUES($1, $2, $3, $4, $5) RETURNING*",[t,a,r,new Date((new Date).toISOString()),new Date((new Date).toISOString())]);e.status(200).json(s.rows[0])}catch(s){e.status(403).json("Upload nicht möglich")}};exports.usermessagesPost=usermessagesPost;const usermessagesPut=async(s,e)=>{const{message:t}=s.body,a=s.params.id;try{const s=await _dbconnect.default.query("UPDATE usermessages SET message = $1, updated_at = $2 WHERE id =$3",[t,new Date((new Date).toISOString()),a]);e.status(200).json(s.rows[0])}catch(s){e.status(404).json("Nicht gefunden")}};exports.usermessagesPut=usermessagesPut;const usermessagesDelete=async(s,e)=>{const t=s.params.id;try{await _dbconnect.default.query("DELETE FROM usermessages WHERE id =$1",[t]),e.status(200).json(`Nachricht mit der id ${t} wurde gelöscht`)}catch(s){e.status(404).json("Nicht gefunden")}};exports.usermessagesDelete=usermessagesDelete;const usermessagesGet=async(s,e)=>{const t=s.params.id;try{const s=await _dbconnect.default.query("SELECT * FROM usermessages WHERE id = $1",[t]);e.status(200).json(s.rows[0])}catch(s){e.status(404).json("Nicht gefunden")}};exports.usermessagesGet=usermessagesGet;const usermessagesGetAll=async(s,e)=>{try{const s=await _dbconnect.default.query("SELECT * FROM usermessages");e.status(200).json(s.rows)}catch(s){e.status(404).json("Nicht gefunden")}};exports.usermessagesGetAll=usermessagesGetAll;