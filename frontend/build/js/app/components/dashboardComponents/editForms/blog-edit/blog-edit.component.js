"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlogEditComponent=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_common=require("@angular/common"),_core=require("@angular/core"),_forms=require("@angular/forms"),_core2=require("@ng-icons/core"),_blog=require("../../../../store/actions/blog.actions");function _initializerDefineProperty(e,t,i,o){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function _applyDecoratedDescriptor(e,t,i,o,r){var l={};return Object.keys(o).forEach((function(e){l[e]=o[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=i.slice().reverse().reduce((function(i,o){return o(e,t,i)||i}),l),r&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(r):void 0,l.initializer=void 0),void 0===l.initializer?(Object.defineProperty(e,t,l),null):l}function _initializerWarningHelper(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let BlogEditComponent=exports.BlogEditComponent=(_dec=(0,_core.Component)({selector:"app-blog-edit",standalone:!0,imports:[_common.CommonModule,_forms.ReactiveFormsModule,_core2.NgIconsModule],templateUrl: '../../html/app/pages/blog-edit.component.html',styleUrl: '../../css/app/pages/blog-edit.component.css'}),_dec2=(0,_core.Input)(),_dec3=(0,_core.Output)(),_dec((_descriptor=_applyDecoratedDescriptor((_class2=class{constructor(e){this.store=e,_initializerDefineProperty(this,"editData",_descriptor,this),_initializerDefineProperty(this,"closeEdit",_descriptor2,this),this.handleClose=()=>{this.closeEdit.emit()},this.fileData=[],this.handleImages=(e,t)=>{let i=t.target.files?t.target.files[0]:null;if(!i)return;const o=[...this.fileData];o[e]=i,this.fileData=[...o]},this.blogEditForm=new _forms.FormGroup({blog_title:new _forms.FormControl("",_forms.Validators.required),blog_content:new _forms.FormControl("",_forms.Validators.required),blog_theme:new _forms.FormControl("",_forms.Validators.required),blog_author:new _forms.FormControl("",_forms.Validators.required)}),this.onSubmit=()=>{if(this.blogEditForm.valid){const{blog_title:e,blog_theme:t,blog_content:i,blog_author:o}=this.blogEditForm.value;if(this.fileData&&this.fileData.length){const e=new FormData;this.fileData.forEach(((t,i)=>{t instanceof File&&(e.append("images",t),e.append("index",i.toString()))})),e.append("blog_title",this.blogEditForm.value.blog_title),e.append("blog_theme",this.blogEditForm.value.blog_theme),e.append("blog_content",this.blogEditForm.value.blog_content),e.append("blog_author",this.blogEditForm.value.blog_author),this.store.dispatch((0,_blog.updateBlog)({id:this.editData?.id,blogData:e})),this.closeEdit.emit()}else{const r={blog_title:e,blog_theme:t,blog_content:i,blog_author:o};this.store.dispatch((0,_blog.updateBlog)({id:this.editData?.id,blogData:r})),this.closeEdit.emit()}}}}ngOnInit(){this.editData&&(this.blogEditForm.get("blog_title")?.setValue(this.editData?.blog_title),this.blogEditForm.get("blog_theme")?.setValue(this.editData?.blog_theme),this.blogEditForm.get("blog_content")?.setValue(this.editData?.blog_content),this.blogEditForm.get("blog_author")?.setValue(this.editData?.blog_author),this.fileData=this.editData.images?[...this.editData.images]:[])}}).prototype,"editData",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"closeEdit",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _core.EventEmitter}}),_class=_class2))||_class);