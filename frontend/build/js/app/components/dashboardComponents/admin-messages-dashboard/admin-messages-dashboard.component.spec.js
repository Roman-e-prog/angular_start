"use strict";var _testing=require("@angular/core/testing"),_adminMessagesDashboard=require("./admin-messages-dashboard.component"),_testing2=require("@ngrx/store/testing"),_core=require("@ng-icons/core"),_outline=require("@ng-icons/material-icons/outline"),_ngxToastr=require("ngx-toastr"),_adminMessage=require("../../../store/selectors/adminMessage.selector"),_adminmessage=require("../../../store/actions/adminmessage.actions"),_auth=require("../../../services_interceptors/auth.service"),_userMessage=require("../../../store/selectors/userMessage.selector"),_blogmember=require("../../../store/selectors/blogmember.selector");describe("AdminMessagesDashboardComponent",(()=>{let e,t,n,r,a,s,o,i,m,l,u,c,d,g,E,h,p;beforeEach((async()=>{const b={user$:{username:"RomanArmin",id:1,is_admin:!0},getUser:jasmine.createSpy("getUser").and.returnValue({id:1,username:"RomanArmin",is_admin:!0})};await _testing.TestBed.configureTestingModule({imports:[_adminMessagesDashboard.AdminMessagesDashboardComponent,_core.NgIconsModule],providers:[(0,_core.provideIcons)({matEditOutline:_outline.matEditOutline,matDeleteOutline:_outline.matDeleteOutline}),(0,_testing2.provideMockStore)(),(0,_ngxToastr.provideToastr)(),{provide:_auth.AuthService,useValue:b}]}).compileComponents(),t=_testing.TestBed.createComponent(_adminMessagesDashboard.AdminMessagesDashboardComponent),e=t.componentInstance,n=_testing.TestBed.inject(_auth.AuthService),r=_testing.TestBed.inject(_testing2.MockStore),a=r.overrideSelector(_adminMessage.selectAllAdminMessageData,[]),s=r.overrideSelector(_adminMessage.selectAdminMessageLoading,!1),o=r.overrideSelector(_adminMessage.selectAdminMessageError,!1),i=r.overrideSelector(_adminMessage.selectAdminMessageMessage,""),m=r.overrideSelector(_userMessage.selectAllUserMessageData,[]),l=r.overrideSelector(_userMessage.selectUserMessageLoading,!1),u=r.overrideSelector(_userMessage.selectUserMessageError,!1),c=r.overrideSelector(_userMessage.selectUserMessageMessage,""),d=r.overrideSelector(_blogmember.selectAllBlogmemberData,[]),g=r.overrideSelector(_blogmember.selectBlogmemberLoading,!1),E=r.overrideSelector(_blogmember.selectBlogmemberError,!1),h=r.overrideSelector(_blogmember.selectBlogmemberMessage,""),p=_testing.TestBed.inject(_ngxToastr.ToastrService),t.detectChanges()})),it("should create",(()=>{expect(e).toBeTruthy()})),it("should have all its elements",(async()=>{a.setResult([{id:1,adminname:"Roman",admin_id:1,message:"Lorem Ipsum Ad Dolores",username:"TestMartin",user_id:2,usermessage_id:1,created_at:new Date("2023-11-27T10:00:00Z")}]),m.setResult([{id:1,username:"TestMartin",user_id:2,message:"Eine Testnachricht",is_answered:!1,created_at:new Date("2023-11-27T10:00:00Z")}]),d.setResult([{id:1,username:"TestMartin",vorname:"Martin",nachname:"Tester",email:"martin@test.de",profile_picture:"",is_admin:!1}]),r.refreshState(),t.detectChanges(),await t.whenStable();const e=t.debugElement.nativeElement.querySelector(".userName"),n=t.debugElement.nativeElement.querySelector(".userMessageid"),s=t.debugElement.nativeElement.querySelector(".userid"),o=t.debugElement.nativeElement.querySelector(".date"),i=t.debugElement.nativeElement.querySelector(".message"),l=t.debugElement.nativeElement.querySelector(".answered"),u=t.debugElement.nativeElement.querySelector("#usermessageDelete"),c=t.debugElement.nativeElement.querySelector(".noMessages"),g=t.debugElement.nativeElement.querySelector("#show"),E=t.debugElement.nativeElement.querySelector(".noUser"),h=t.debugElement.nativeElement.querySelector(".adminMessageForm"),p=t.debugElement.nativeElement.querySelector("#username"),b=t.debugElement.nativeElement.querySelector("#user_id"),y=t.debugElement.nativeElement.querySelector("#usermessage_id"),v=t.debugElement.nativeElement.querySelector("#message"),x=t.debugElement.nativeElement.querySelector(".mainButton"),_=t.debugElement.nativeElement.querySelector(".adminName"),q=t.debugElement.nativeElement.querySelector("#adminMessageDate"),S=t.debugElement.nativeElement.querySelector("#adminMessage"),M=t.debugElement.nativeElement.querySelector(".toUser"),T=t.debugElement.nativeElement.querySelector(".toUserId"),B=t.debugElement.nativeElement.querySelector(".userQuestion");expect(n).toBeTruthy(),expect(n.textContent.trim()).toEqual("1"),expect(e).toBeTruthy(),expect(e.textContent.trim()).toEqual("TestMartin"),expect(s).toBeTruthy(),expect(s.textContent.trim()).toEqual("2"),expect(o).toBeTruthy(),expect(o.textContent.trim()).toContain("Monday, November 27, 2023"),expect(i).toBeTruthy(),expect(i.textContent.trim()).toEqual("Eine Testnachricht"),expect(l).toBeFalsy(),expect(u).toBeTruthy(),expect(c).toBeFalsy(),expect(g).toBeTruthy(),expect(E).toBeFalsy(),expect(h).toBeTruthy(),expect(p).toBeTruthy(),expect(b).toBeTruthy(),expect(y).toBeTruthy(),expect(v).toBeTruthy(),expect(x).toBeTruthy(),expect(_).toBeTruthy(),expect(_.textContent.trim()).toEqual("Roman"),expect(q).toBeTruthy(),expect(q.textContent.trim()).toContain("Monday, November 27, 2023"),expect(S).toBeTruthy(),expect(S.textContent.trim()).toEqual("Lorem Ipsum Ad Dolores"),expect(M).toBeTruthy(),expect(M.textContent.trim()).toEqual("Nachricht an: TestMartin"),expect(T).toBeTruthy(),expect(T.textContent.trim()).toEqual("Nachricht an: 2"),expect(B).toBeTruthy(),expect(B.textContent.trim()).toEqual("Die Frage 1")})),it("form should get values and send them",(()=>{m.setResult([{id:1,username:"TestMartin",user_id:2,message:"Eine Testnachricht",is_answered:!1,created_at:new Date("2023-11-27T10:00:00Z")}]);const n=spyOn(r,"dispatch"),a=(t.debugElement.nativeElement.querySelector(".adminMessageForm"),t.debugElement.nativeElement.querySelector("#username")),s=t.debugElement.nativeElement.querySelector("#user_id"),o=t.debugElement.nativeElement.querySelector("#usermessage_id"),i=t.debugElement.nativeElement.querySelector("#message"),l=t.debugElement.nativeElement.querySelector(".mainButton");e.adminMessageForm.controls.username.setValue("TestMartin"),e.adminMessageForm.controls.user_id.setValue(2),e.adminMessageForm.controls.usermessage_id.setValue(1),e.adminMessageForm.controls.message.setValue("Eine Nachricht an den user"),expect(a.value).toEqual("TestMartin"),expect(s.value).toEqual("2"),expect(o.value).toEqual("1"),expect(i.value).toEqual("Eine Nachricht an den user"),t.detectChanges(),l.click(),expect(n).toHaveBeenCalledWith((0,_adminmessage.createAdminMessage)({adminMessageData:{adminname:"RomanArmin",admin_id:1,username:"TestMartin",user_id:2,usermessage_id:1,message:"Eine Nachricht an den user"}}))})),it("should open edit Form on click",(async()=>{const e=spyOn(r,"dispatch");a.setResult([{id:1,adminname:"Roman",admin_id:1,message:"Lorem Ipsum Ad Dolores",username:"TestMartin",user_id:2,usermessage_id:1,created_at:new Date("2023-11-27T10:00:00Z")}]),r.refreshState(),t.detectChanges(),await t.whenStable();const n=t.debugElement.nativeElement.querySelector("#edit");expect(n).toBeTruthy(),n.click(),t.detectChanges(),await t.whenStable().then((()=>{const n=t.debugElement.nativeElement.querySelector(".editAdminMessageForm");expect(n).toBeTruthy();const r=t.debugElement.nativeElement.querySelector("#message");expect(r).toBeTruthy(),expect(r.value).toEqual("Lorem Ipsum Ad Dolores");t.debugElement.nativeElement.querySelector(".mainButton").click(),t.detectChanges(),expect(e).toHaveBeenCalledWith((0,_adminmessage.updateAdminMessage)({id:1,adminMessageData:{message:"Lorem Ipsum Ad Dolores"}}))}))})),it("should delete on click",(async()=>{a.setResult([{id:1,adminname:"Roman",admin_id:1,message:"Lorem Ipsum Ad Dolores",username:"TestMartin",user_id:2,usermessage_id:1,created_at:new Date("2023-11-27T10:00:00Z")}]),r.refreshState(),t.detectChanges(),await t.whenStable();const e=spyOn(r,"dispatch"),n=t.debugElement.nativeElement.querySelector("#delete");expect(n).toBeTruthy(),n.click(),expect(e).toHaveBeenCalledWith((0,_adminmessage.deleteAdminMessage)({id:1}))})),it("should displayUser on button click",(async()=>{d.setResult([{id:2,username:"TestMartin",vorname:"Martin",nachname:"Tester",email:"martin@test.de",profile_picture:"",is_admin:!1,created_at:new Date("2023-11-27T10:00:00Z")}]),r.refreshState(),t.detectChanges();const e=t.debugElement.nativeElement.querySelector("#show"),n=t.debugElement.nativeElement.querySelector("#hide"),a=t.debugElement.nativeElement.querySelector(".noUser");expect(e).toBeTruthy(),expect(n).toBeFalsy(),expect(a).toBeFalsy(),e.click(),t.detectChanges(),await t.whenStable().then((()=>{const e=t.debugElement.nativeElement.querySelector("#show"),n=t.debugElement.nativeElement.querySelector("#hide"),r=t.debugElement.nativeElement.querySelector(".userTable"),a=t.debugElement.nativeElement.querySelector("#blogmemberName"),s=t.debugElement.nativeElement.querySelector("#blogmemberId"),o=t.debugElement.nativeElement.querySelector("#blogmemberDate"),i=t.debugElement.nativeElement.querySelector("#blogmemberVorname"),m=t.debugElement.nativeElement.querySelector("#blogmemberNachname"),l=t.debugElement.nativeElement.querySelector("#blogmemberEmail");expect(e).toBeFalsy(),expect(n).toBeTruthy(),expect(r).toBeTruthy(),expect(a.textContent.trim()).toEqual("TestMartin"),expect(s.textContent.trim()).toEqual("2"),expect(o.textContent.trim()).toContain("Monday, November 27, 2023"),expect(i.textContent.trim()).toEqual("Martin"),expect(m.textContent.trim()).toEqual("Tester"),expect(l.textContent.trim()).toEqual("martin@test.de")}))}))}));