"use strict";var _testing=require("@angular/core/testing"),_blogDashboard=require("./blog-dashboard.component"),_core=require("@ng-icons/core"),_outline=require("@ng-icons/material-icons/outline"),_testing2=require("@ngrx/store/testing"),_ngxToastr=require("ngx-toastr"),_blog=require("../../../store/selectors/blog.selectors"),_blog2=require("../../../store/actions/blog.actions");describe("BlogDashboardComponent",(()=>{let e,t,o,l,n,r,a,i;beforeEach((async()=>{await _testing.TestBed.configureTestingModule({imports:[_blogDashboard.BlogDashboardComponent,_core.NgIconsModule],providers:[(0,_core.provideIcons)({matEditOutline:_outline.matEditOutline,matDeleteOutline:_outline.matDeleteOutline}),(0,_testing2.provideMockStore)(),(0,_ngxToastr.provideToastr)()]}).compileComponents(),t=_testing.TestBed.createComponent(_blogDashboard.BlogDashboardComponent),e=t.componentInstance,o=_testing.TestBed.inject(_testing2.MockStore),l=o.overrideSelector(_blog.selectAllBlogData,[]),n=o.overrideSelector(_blog.selectBlogLoading,!1),r=o.overrideSelector(_blog.selectBlogError,!1),a=o.overrideSelector(_blog.selectBlogMessage,""),i=_testing.TestBed.inject(_ngxToastr.ToastrService),t.detectChanges()})),it("should create",(()=>{expect(e).toBeTruthy()})),it("should have all its elements",(async()=>{l.setResult([{id:1,blog_title:"Ein Titel",blog_theme:"Ein Thema",blog_content:"Lorem Ipsum Ad Dolores",blog_author:"Roman"}]),o.refreshState(),t.detectChanges(),await t.whenStable();const e=t.debugElement.nativeElement.querySelector(".blogTitle"),n=t.debugElement.nativeElement.querySelector(".blogTheme"),r=t.debugElement.nativeElement.querySelector(".blogContent"),a=t.debugElement.nativeElement.querySelector(".author"),i=t.debugElement.nativeElement.querySelector(".title"),u=t.debugElement.nativeElement.querySelector(".blogForm"),c=t.debugElement.nativeElement.querySelector("#blog_title"),g=t.debugElement.nativeElement.querySelector("#blog_theme"),m=t.debugElement.nativeElement.querySelector("#blog_content"),s=t.debugElement.nativeElement.querySelector("#blog_author"),b=t.debugElement.nativeElement.querySelector(".mainButton");expect(e).toBeTruthy(),expect(n).toBeTruthy(),expect(r).toBeTruthy(),expect(a).toBeTruthy(),expect(i).toBeTruthy(),expect(u).toBeTruthy(),expect(c).toBeTruthy(),expect(g).toBeTruthy(),expect(m).toBeTruthy(),expect(s).toBeTruthy(),expect(b).toBeTruthy(),expect(e.textContent.trim()).toEqual("Ein Titel"),expect(n.textContent.trim()).toEqual("Ein Thema"),expect(r.textContent.trim()).toEqual("Lorem Ipsum Ad Dolores"),expect(a.textContent.trim()).toEqual("Roman"),expect(i.textContent.trim()).toEqual("Blogpost einpflegen")})),it("form should get values and send them",(()=>{const l=spyOn(o,"dispatch"),n=(t.debugElement.nativeElement.querySelector(".blogForm"),t.debugElement.nativeElement.querySelector("#blog_title")),r=t.debugElement.nativeElement.querySelector("#blog_theme"),a=t.debugElement.nativeElement.querySelector("#blog_content"),i=t.debugElement.nativeElement.querySelector("#blog_author"),u=t.debugElement.nativeElement.querySelector(".mainButton");e.blogForm.controls.blog_title.setValue("Ein Blog Titel"),e.blogForm.controls.blog_theme.setValue("Ein Blog Thema"),e.blogForm.controls.blog_content.setValue("Testinhalt"),e.blogForm.controls.blog_author.setValue("Roman Armin"),expect(n.value).toEqual("Ein Blog Titel"),expect(r.value).toEqual("Ein Blog Thema"),expect(a.value).toEqual("Testinhalt"),expect(i.value).toEqual("Roman Armin"),t.detectChanges(),u.click(),expect(l).toHaveBeenCalledWith((0,_blog2.createBlog)({blogData:{blog_title:"Ein Blog Titel",blog_theme:"Ein Blog Thema",blog_content:"Testinhalt",blog_author:"Roman Armin"}}))})),it("should open edit Form on click",(async()=>{const e=spyOn(o,"dispatch");l.setResult([{id:1,blog_title:"Ein Titel",blog_theme:"Ein Thema",blog_content:"Lorem Ipsum Ad Dolores",blog_author:"Roman"}]),o.refreshState(),t.detectChanges(),await t.whenStable();const n=t.debugElement.nativeElement.querySelector("#edit");expect(n).toBeTruthy(),n.click(),t.detectChanges(),await t.whenStable().then((()=>{const o=t.debugElement.nativeElement.querySelector(".title");expect(o.textContent.trim()).toEqual("Blogpost updaten");const l=t.debugElement.nativeElement.querySelector(".blogEditForm");expect(l).toBeTruthy();const n=t.debugElement.nativeElement.querySelector("#blog_title"),r=t.debugElement.nativeElement.querySelector("#blog_theme"),a=t.debugElement.nativeElement.querySelector("#blog_content"),i=t.debugElement.nativeElement.querySelector("#blog_author");expect(n).toBeTruthy(),expect(r).toBeTruthy(),expect(a).toBeTruthy(),expect(i).toBeTruthy(),expect(n.value).toEqual("Ein Titel"),expect(r.value).toEqual("Ein Thema"),expect(a.value).toEqual("Lorem Ipsum Ad Dolores"),expect(i.value).toEqual("Roman");t.debugElement.nativeElement.querySelector(".mainButton").click(),t.detectChanges(),expect(e).toHaveBeenCalledWith((0,_blog2.updateBlog)({id:1,blogData:{blog_title:"Ein Titel",blog_theme:"Ein Thema",blog_content:"Lorem Ipsum Ad Dolores",blog_author:"Roman"}}))}))})),it("should delete on click",(async()=>{l.setResult([{id:1,blog_title:"Ein Titel",blog_theme:"Ein Thema",blog_content:"Lorem Ipsum Ad Dolores",blog_author:"Roman"}]),o.refreshState(),t.detectChanges(),await t.whenStable();const e=spyOn(o,"dispatch"),n=t.debugElement.nativeElement.querySelector("#delete");expect(n).toBeTruthy(),n.click(),expect(e).toHaveBeenCalledWith((0,_blog2.deleteBlog)({id:1}))}))}));