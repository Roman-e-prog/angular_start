"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BibliothekDashboardComponent=void 0;var _dec,_class,_core=require("@angular/core"),_rxjs=require("rxjs"),_bibliothek=require("../../../store/selectors/bibliothek.selector"),_bibliothek2=require("../../../store/actions/bibliothek.actions"),_forms=require("@angular/forms"),_common=require("@angular/common"),_core2=require("@ng-icons/core"),_bibliothekEdit=require("../editForms/bibliothek-edit/bibliothek-edit.component");let BibliothekDashboardComponent=exports.BibliothekDashboardComponent=(_dec=(0,_core.Component)({selector:"app-bibliothek-dashboard",standalone:!0,imports:[_common.CommonModule,_forms.ReactiveFormsModule,_core2.NgIconsModule,_bibliothekEdit.BibliothekEditComponent],templateUrl: '../../html/app/pages/bibliothek-dashboard.component.html',styleUrl: '../../css/app/pages/bibliothek-dashboard.component.css'}))(_class=class{constructor(e,t,i){this.store=e,this.toastr=t,this.sanitizer=i,this.allBibliothek$=this.store.select(_bibliothek.selectAllBibliothekData),this.isLoading$=this.store.select(_bibliothek.selectBibliothekLoading),this.isError$=this.store.select(_bibliothek.selectBibliothekError),this.message$=this.store.select(_bibliothek.selectBibliothekMessage),this.youtubeUrl="https://www.youtube.com/embed/",this.bibliothekForm=new _forms.FormGroup({bibliothek_title:new _forms.FormControl("",_forms.Validators.required),bibliothek_ressort:new _forms.FormControl("",_forms.Validators.required),bibliothek_url:new _forms.FormControl("",_forms.Validators.required)}),this.onSubmit=()=>{const{bibliothek_title:e,bibliothek_ressort:t,bibliothek_url:i}=this.bibliothekForm.value,o={bibliothek_title:e,bibliothek_ressort:t,bibliothek_url:i};this.store.dispatch((0,_bibliothek2.createBibliothek)({bibliothekData:o})),this.bibliothekForm.reset()},this.handleDelete=e=>{this.store.dispatch((0,_bibliothek2.deleteBibliothek)({id:e}))},this.editModule=!1,this.editData=null,this.handleEdit=e=>{this.editModule=!0,this.editData=e},this.handleClose=()=>{this.editModule=!1}}getSafeUrl(e){const t=e.split("=")[1],i=this.youtubeUrl+t;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}ngOnInit(){this.isError$.pipe((0,_rxjs.tap)((e=>{e&&this.message$.subscribe((e=>{this.toastr.error(e)}))}))).subscribe(),this.store.dispatch((0,_bibliothek2.getAllBibliothek)())}})||_class;