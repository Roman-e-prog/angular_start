"use strict";var _testing=require("@angular/core/testing"),_bibliothekDashboard=require("./bibliothek-dashboard.component"),_testing2=require("@ngrx/store/testing"),_ngxToastr=require("ngx-toastr"),_core=require("@ng-icons/core"),_outline=require("@ng-icons/material-icons/outline"),_bibliothek=require("../../../store/selectors/bibliothek.selector"),_bibliothek2=require("../../../store/actions/bibliothek.actions");describe("BibliothekDashboardComponent",(()=>{let e,t,i,o,l,n,r,b;beforeEach((async()=>{await _testing.TestBed.configureTestingModule({imports:[_bibliothekDashboard.BibliothekDashboardComponent,_core.NgIconsModule],providers:[(0,_core.provideIcons)({matEditOutline:_outline.matEditOutline,matDeleteOutline:_outline.matDeleteOutline}),(0,_testing2.provideMockStore)(),(0,_ngxToastr.provideToastr)()]}).compileComponents(),t=_testing.TestBed.createComponent(_bibliothekDashboard.BibliothekDashboardComponent),e=t.componentInstance,i=_testing.TestBed.inject(_testing2.MockStore),o=i.overrideSelector(_bibliothek.selectAllBibliothekData,[]),l=i.overrideSelector(_bibliothek.selectBibliothekLoading,!1),n=i.overrideSelector(_bibliothek.selectBibliothekError,!1),r=i.overrideSelector(_bibliothek.selectBibliothekMessage,""),b=_testing.TestBed.inject(_ngxToastr.ToastrService),t.detectChanges()})),it("should create",(()=>{expect(e).toBeTruthy()})),it("should have all its elements",(async()=>{o.setResult([{id:1,bibliothek_title:"Ein Bibliothek Titel",bibliothek_ressort:"HTML",bibliothek_url:"https://www.youtube.com/watch?v=NpEaa2P7qZI"}]),i.refreshState(),t.detectChanges(),await t.whenStable();const e=t.debugElement.nativeElement.querySelector(".bibliothek_title"),l=t.debugElement.nativeElement.querySelector(".bibliothek_ressort"),n=t.debugElement.nativeElement.querySelector(".link"),r=t.debugElement.nativeElement.querySelector(".title"),b=t.debugElement.nativeElement.querySelector(".bibliothekForm"),a=t.debugElement.nativeElement.querySelector("#bibliothek_title"),c=t.debugElement.nativeElement.querySelector("#bibliothek_ressort"),h=t.debugElement.nativeElement.querySelector("#bibliothek_url"),u=t.debugElement.nativeElement.querySelector(".mainButton");expect(e).toBeTruthy(),expect(l).toBeTruthy(),expect(n).toBeTruthy(),expect(r).toBeTruthy(),expect(b).toBeTruthy(),expect(a).toBeTruthy(),expect(c).toBeTruthy(),expect(h).toBeTruthy(),expect(u).toBeTruthy(),expect(e.textContent.trim()).toEqual("Ein Bibliothek Titel"),expect(l.textContent.trim()).toEqual("HTML"),expect(n.href).toEqual("https://www.youtube.com/watch?v=NpEaa2P7qZI"),expect(r.textContent.trim()).toEqual("Bibliothek einpflegen")})),it("form should get values and send them",(()=>{const o=spyOn(i,"dispatch"),l=(t.debugElement.nativeElement.querySelector(".title"),t.debugElement.nativeElement.querySelector(".bibliothekForm"),t.debugElement.nativeElement.querySelector("#bibliothek_title")),n=t.debugElement.nativeElement.querySelector("#bibliothek_ressort"),r=t.debugElement.nativeElement.querySelector("#bibliothek_url"),b=t.debugElement.nativeElement.querySelector(".mainButton");e.bibliothekForm.controls.bibliothek_title.setValue("Ein Bibliothek Titel"),e.bibliothekForm.controls.bibliothek_ressort.setValue("CSS"),e.bibliothekForm.controls.bibliothek_url.setValue("https://www.youtube.com/watch?v=NpEaa2P7qZI"),expect(l.value).toEqual("Ein Bibliothek Titel"),expect(n.value).toEqual("CSS"),expect(r.value).toEqual("https://www.youtube.com/watch?v=NpEaa2P7qZI"),t.detectChanges(),b.click(),expect(o).toHaveBeenCalledWith((0,_bibliothek2.createBibliothek)({bibliothekData:{bibliothek_title:"Ein Bibliothek Titel",bibliothek_ressort:"CSS",bibliothek_url:"https://www.youtube.com/watch?v=NpEaa2P7qZI"}}))})),it("should open edit Form on click",(async()=>{const e=spyOn(i,"dispatch");o.setResult([{id:1,bibliothek_title:"Ein Bibliothek Titel",bibliothek_ressort:"HTML",bibliothek_url:"https://www.youtube.com/watch?v=NpEaa2P7qZI"}]),i.refreshState(),t.detectChanges(),await t.whenStable();const l=t.debugElement.nativeElement.querySelector("#edit");expect(l).toBeTruthy(),l.click(),t.detectChanges(),await t.whenStable().then((()=>{const i=t.debugElement.nativeElement.querySelector(".title");expect(i.textContent.trim()).toEqual("Bibliothek updaten");const o=t.debugElement.nativeElement.querySelector(".bibliothekEditForm");expect(o).toBeTruthy();const l=t.debugElement.nativeElement.querySelector("#bibliothek_title"),n=t.debugElement.nativeElement.querySelector("#bibliothek_ressort"),r=t.debugElement.nativeElement.querySelector("#bibliothek_url");expect(l).toBeTruthy(),expect(n).toBeTruthy(),expect(r).toBeTruthy(),expect(l.value).toEqual("Ein Bibliothek Titel"),expect(n.value).toEqual("HTML"),expect(r.value).toEqual("https://www.youtube.com/watch?v=NpEaa2P7qZI");t.debugElement.nativeElement.querySelector(".mainButton").click(),t.detectChanges(),expect(e).toHaveBeenCalledWith((0,_bibliothek2.updateBibliothek)({id:1,bibliothekData:{bibliothek_title:"Ein Bibliothek Titel",bibliothek_ressort:"HTML",bibliothek_url:"https://www.youtube.com/watch?v=NpEaa2P7qZI"}}))}))})),it("should delete on click",(async()=>{o.setResult([{id:1,bibliothek_title:"Ein Bibliothek Titel",bibliothek_ressort:"HTML",bibliothek_url:"https://www.youtube.com/watch?v=NpEaa2P7qZI"}]),i.refreshState(),t.detectChanges(),await t.whenStable();const e=spyOn(i,"dispatch"),l=t.debugElement.nativeElement.querySelector("#delete");expect(l).toBeTruthy(),l.click(),expect(e).toHaveBeenCalledWith((0,_bibliothek2.deleteBibliothek)({id:1}))}))}));