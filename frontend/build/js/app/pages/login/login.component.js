"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoginComponent=void 0;var _dec,_class,_core=require("@angular/core"),_forms=require("@angular/forms"),_navbar=require("../../components/navbar/navbar.component"),_common=require("@angular/common"),_mobileNavbar=require("../../components/mobile-navbar/mobile-navbar.component");let LoginComponent=exports.LoginComponent=(_dec=(0,_core.Component)({selector:"app-login",standalone:!0,imports:[_forms.ReactiveFormsModule,_forms.FormsModule,_navbar.NavbarComponent,_common.CommonModule,_mobileNavbar.MobileNavbarComponent],templateUrl: '../../html/app/pages/login.component.html',styleUrl: '../../css/app/pages/login.component.css'}))(_class=class{constructor(o,e,r,s,t,i,n){this.httpClient=o,this.toastr=e,this.authService=r,this.router=s,this.resizeObserverService=t,this.cd=i,this.platFormId=n,this.windowWidth=void 0,this.resizeSubscription=void 0,this.loginForm=new _forms.FormGroup({username:new _forms.FormControl("",{validators:_forms.Validators.required,updateOn:"blur"}),email:new _forms.FormControl("",{validators:[_forms.Validators.required,_forms.Validators.email],updateOn:"blur"}),password:new _forms.FormControl("",[_forms.Validators.required,_forms.Validators.minLength(6)])}),this.onSubmit=()=>{if(this.loginForm.valid){const{username:o,email:e,password:r}=this.loginForm.value;this.authService.login(o,e,r).subscribe((()=>({next:o=>{console.log(o)},error:o=>{console.log(o)}})))}},this.passwordForgotten=()=>{const o=this.loginForm.value.email;""===o?this.toastr.error("Bitte geben Sie Ihre Email ein, um das Password zurÃ¼ckzusetzen"):this.httpClient.post("http://localhost:5000/api/auth/forgotten",{email:o}).subscribe({next:o=>{this.toastr.success(o)},error:o=>{this.toastr.success(o)}})}}ngOnInit(){this.authService.user.subscribe((o=>{o&&(o.is_admin?this.router.navigate(["/dashboard"]):this.router.navigate(["/"]))})),(0,_common.isPlatformBrowser)(this.platFormId)&&(this.resizeSubscription=this.resizeObserverService.resize$.subscribe((o=>{this.windowWidth=o,this.cd.detectChanges()})))}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}})||_class;