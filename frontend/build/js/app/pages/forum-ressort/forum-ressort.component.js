"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ForumRessortComponent=void 0;var _dec,_class,_core=require("@angular/core"),_router=require("@angular/router"),_rxjs=require("rxjs"),_forum=require("../../store/selectors/forum.selectors"),_navbar=require("../../components/navbar/navbar.component"),_common=require("@angular/common"),_core2=require("@ng-icons/core"),_questionModule=require("../../components/question-module/question-module.component"),_forum2=require("../../store/actions/forum.actions"),_mobileNavbar=require("../../components/mobile-navbar/mobile-navbar.component");let ForumRessortComponent=exports.ForumRessortComponent=(_dec=(0,_core.Component)({selector:"app-forum-ressort",standalone:!0,imports:[_navbar.NavbarComponent,_common.CommonModule,_router.RouterLink,_questionModule.QuestionModuleComponent,_core2.NgIconsModule,_mobileNavbar.MobileNavbarComponent],templateUrl: '../../html/app/pages/forum-ressort.component.html',styleUrl: '../../css/app/pages/forum-ressort.component.css'}))(_class=class{constructor(e,s,r,t,o,i,n,u,a){this.route=e,this.store=s,this.toastr=r,this.httpClient=t,this.authService=o,this.htmlStripService=i,this.cd=n,this.resizeObserverService=u,this.platformId=a,this.user=this.authService.getUser(),this.windowWidth=void 0,this.resizeSubsription=void 0,this.questionModule=!1,this.noLikes=()=>{this.toastr.error("Likes oder Dislikes können nur auf der Seite des Beitrags vergeben werden")},this.allForum$=this.store.select(_forum.selectAllForumData),this.isLoading$=this.store.select(_forum.selectForumLoading),this.isError$=this.store.select(_forum.selectForumError),this.message$=this.store.select(_forum.selectForumMessage),this.name=this.route.snapshot.paramMap.get("name"),this.filteredForums$=this.allForum$.pipe((0,_rxjs.map)((e=>e.filter((e=>e.question_ressort===this.name))))),this.handleQuestion=()=>{this.user?this.questionModule=!0:this.toastr.error("Sie müssen sich einloggen, wenn Sie ein Thema eröffnen möchten")},this.handleClose=()=>{this.questionModule=!1},this.handleViews=e=>{this.httpClient.post("http://localhost:5000/api/forum/views",{id:e}).subscribe({next:e=>{}})}}getProcessedContent(e){return this.htmlStripService.stripHtml(e).trim()}ngOnInit(){(0,_common.isPlatformBrowser)(this.platformId)&&(this.resizeSubsription=this.resizeObserverService.resize$.subscribe((e=>{this.windowWidth=e,this.cd.detectChanges()}))),this.isError$.pipe((0,_rxjs.tap)((e=>{e&&this.message$.subscribe((e=>{this.toastr.error(e)}))}))).subscribe(),this.store.dispatch((0,_forum2.getAllForum)())}ngOnDestroy(){this.resizeSubsription&&this.resizeSubsription.unsubscribe()}})||_class;