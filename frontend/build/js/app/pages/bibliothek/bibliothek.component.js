"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BibliothekComponent=void 0;var _dec,_class,_core=require("@angular/core"),_rxjs=require("rxjs"),_bibliothek=require("../../store/selectors/bibliothek.selector"),_bibliothek2=require("../../store/actions/bibliothek.actions"),_common=require("@angular/common"),_navbar=require("../../components/navbar/navbar.component"),_core2=require("@ng-icons/core"),_youtubePlayer=require("@angular/youtube-player"),_mobileNavbar=require("../../components/mobile-navbar/mobile-navbar.component");let BibliothekComponent=exports.BibliothekComponent=(_dec=(0,_core.Component)({selector:"app-bibliothek",standalone:!0,imports:[_common.CommonModule,_navbar.NavbarComponent,_core2.NgIconsModule,_youtubePlayer.YouTubePlayer,_mobileNavbar.MobileNavbarComponent],templateUrl: '../../html/app/pages/bibliothek.component.html',styleUrl: '../../css/app/pages/bibliothek.component.css'}))(_class=class{constructor(t,i,e,s,h){this.store=t,this.toastr=i,this.resizeObserverService=e,this.cd=s,this.platformId=h,this.allBibliothek$=this.store.select(_bibliothek.selectAllBibliothekData),this.isLoading$=this.store.select(_bibliothek.selectBibliothekLoading),this.isError$=this.store.select(_bibliothek.selectBibliothekError),this.message$=this.store.select(_bibliothek.selectBibliothekMessage),this.splitUrl=t=>t.split("=")[1],this.resizeSubscription=void 0,this.htmlVideos$=void 0,this.cssVideos$=void 0,this.javaScriptVideos$=void 0,this.windowWidth=void 0,this.one=void 0,this.two=void 0,this.three=void 0,this.htmlSlideIndex=0,this.cssSlideIndex=0,this.javaScriptSlideIndex=0,this.htmlStyle=void 0,this.cssStyle=void 0,this.javaScriptStyle=void 0,this.playerWidth=void 0,this.playerHight=260,this.filterVideos=()=>{this.htmlVideos$=this.filterByRessort("HTML"),this.cssVideos$=this.filterByRessort("CSS"),this.javaScriptVideos$=this.filterByRessort("JavaScript")},this.filterByRessort=t=>this.allBibliothek$.pipe((0,_rxjs.map)((i=>i.filter((i=>i.bibliothek_ressort===t))))),this.updateStyles=()=>{this.htmlStyle=this.getStyles(this.htmlSlideIndex,this.one,this.two,this.three),this.cssStyle=this.getStyles(this.cssSlideIndex,this.one,this.two,this.three),this.javaScriptStyle=this.getStyles(this.javaScriptSlideIndex,this.one,this.two,this.three)},this.getStyles=(t,i,e,s)=>{const h={minWidth:`${s}px`,transform:`translateX(${t*-s}px)`},l={minWidth:`${e}px`,transform:`translateX(${t*-e}px)`},o={minWidth:`${i}px`,transform:`translateX(${t*-i}px)`};return this.windowWidth>760?(this.playerWidth=parseInt(h.minWidth.split("p")[0]),h):this.windowWidth>560?(this.playerWidth=parseInt(l.minWidth.split("p")[0]),l):(this.playerWidth=parseInt(o.minWidth.split("p")[0]),o)},this.handleHtmlSlide=t=>{console.log(this.htmlSlideIndex),this.htmlVideos$.subscribe((i=>{"left"===t?this.htmlSlideIndex>0&&(this.htmlSlideIndex-=1):"right"===t&&this.windowWidth>760?this.htmlSlideIndex<i.length-3?this.htmlSlideIndex+=1:i.length:"right"===t&&this.windowWidth>560?this.htmlSlideIndex<i.length-2?this.htmlSlideIndex+=1:i.length:this.htmlSlideIndex<i.length-1?this.htmlSlideIndex+=1:i.length,this.updateStyles()}))},this.handleCssSlide=t=>{this.cssVideos$.subscribe((i=>{"left"===t?this.cssSlideIndex>0&&(this.cssSlideIndex-=1):"right"===t&&this.windowWidth>760?this.cssSlideIndex<i.length-3?this.cssSlideIndex+=1:i.length:"right"===t&&this.windowWidth>560?this.cssSlideIndex<i.length-2?this.cssSlideIndex+=1:i.length:this.cssSlideIndex<i.length-1?this.cssSlideIndex+=1:i.length,this.updateStyles()}))},this.handleJavaScriptSlide=t=>{this.javaScriptVideos$.subscribe((i=>{"left"===t?this.javaScriptSlideIndex>0&&(this.javaScriptSlideIndex-=1):"right"===t&&this.windowWidth>760?this.javaScriptSlideIndex<i.length-3?this.javaScriptSlideIndex+=1:i.length:"right"===t&&this.windowWidth>560?this.javaScriptSlideIndex<i.length-2?this.javaScriptSlideIndex+=1:i.length:this.javaScriptSlideIndex<i.length-1?this.javaScriptSlideIndex+=1:i.length,this.updateStyles()}))}}ngOnInit(){(0,_common.isPlatformBrowser)(this.platformId)&&(this.resizeSubscription=this.resizeObserverService.resize$.subscribe((t=>{this.windowWidth=t,this.one=this.windowWidth,this.two=this.windowWidth/2,this.three=this.windowWidth/3,this.updateStyles(),this.cd.detectChanges()}))),this.isError$.pipe((0,_rxjs.tap)((t=>{t&&this.message$.subscribe((t=>{this.toastr.error(t)}))}))).subscribe(),this.store.dispatch((0,_bibliothek2.getAllBibliothek)()),this.filterVideos()}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}})||_class;