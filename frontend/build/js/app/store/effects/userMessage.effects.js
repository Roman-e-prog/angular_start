"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserMessagesEffect=void 0;var _dec,_class,_core=require("@angular/core"),_effects=require("@ngrx/effects"),_environment=require("../../environments/environment"),_usermessage=require("../actions/usermessage.actions"),_rxjs=require("rxjs");let UserMessagesEffect=exports.UserMessagesEffect=(_dec=(0,_core.Injectable)())(_class=class{constructor(e,s,r){this.store=e,this.actions$=s,this.httpClient=r,this.api_url=`${_environment.environment.apiURL}api/usermessages/`,this.createUserMessage$=(0,_effects.createEffect)((()=>this.actions$.pipe((0,_effects.ofType)(_usermessage.createUserMessage),(0,_rxjs.mergeMap)((e=>this.httpClient.post(this.api_url,e.userMessageData).pipe((0,_rxjs.map)((e=>(this.store.dispatch((0,_usermessage.getAllUserMessage)()),(0,_usermessage.createUserMessageSuccess)({userMessageData:e})))),(0,_rxjs.catchError)((e=>(0,_rxjs.of)((0,_usermessage.createUserMessageError)({error:e})))))))))),this.updateUserMessage$=(0,_effects.createEffect)((()=>this.actions$.pipe((0,_effects.ofType)(_usermessage.updateUserMessage),(0,_rxjs.mergeMap)((e=>this.httpClient.put(this.api_url+e.id,e.userMessageData).pipe((0,_rxjs.map)((e=>(this.store.dispatch((0,_usermessage.getAllUserMessage)()),(0,_usermessage.updateUserMessageSuccess)({userMessageData:e})))),(0,_rxjs.catchError)((e=>(0,_rxjs.of)((0,_usermessage.updateUserMessageError)({error:e})))))))))),this.deleteUserMessage$=(0,_effects.createEffect)((()=>this.actions$.pipe((0,_effects.ofType)(_usermessage.deleteUserMessage),(0,_rxjs.mergeMap)((e=>this.httpClient.delete(this.api_url+e.id).pipe((0,_rxjs.map)((s=>(this.store.dispatch((0,_usermessage.getAllUserMessage)()),(0,_usermessage.deleteUserMessageSuccess)({id:e.id})))),(0,_rxjs.catchError)((e=>(0,_rxjs.of)((0,_usermessage.deleteUserMessageError)({error:e})))))))))),this.getUserMessage$=(0,_effects.createEffect)((()=>this.actions$.pipe((0,_effects.ofType)(_usermessage.getUserMessage),(0,_rxjs.mergeMap)((e=>this.httpClient.get(this.api_url+"find/"+e.id).pipe((0,_rxjs.map)((e=>(0,_usermessage.getUserMessageSuccess)({userMessageData:e}))),(0,_rxjs.catchError)((e=>(0,_rxjs.of)((0,_usermessage.getUserMessageError)({error:e})))))))))),this.getAllUserMessage$=(0,_effects.createEffect)((()=>this.actions$.pipe((0,_effects.ofType)(_usermessage.getAllUserMessage),(0,_rxjs.mergeMap)((e=>this.httpClient.get(this.api_url+"find/").pipe((0,_rxjs.map)((e=>(0,_usermessage.getAllUserMessageSuccess)({data:e}))),(0,_rxjs.catchError)((e=>(0,_rxjs.of)((0,_usermessage.getAllUserMessageError)({error:e}))))))))))}})||_class;